{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div class="fs-3 fw-bold">Admin</div>
  <form method="post" action="{{ url_for('admin_logout') }}">
    <button class="btn btn-outline-secondary">Logout</button>
  </form>
</div>

<div class="row g-3">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header fw-bold">â• ÎÎ­Î¿ ÎºÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±</div>
      <div class="card-body">
        <form method="post" action="{{ url_for('admin_shop_new') }}" class="row g-2">
          <div class="col-md-6"><input class="form-control" name="name" placeholder="ÎŒÎ½Î¿Î¼Î±" required></div>
          <div class="col-md-6"><input class="form-control" name="category" placeholder="Category (Hair/Barber)" value="Hair"></div>
          <div class="col-md-6"><input class="form-control" name="city" placeholder="Î ÏŒÎ»Î·" value="Î§Î±Î½Î¹Î¬"></div>
          <div class="col-md-6"><input class="form-control" name="area" placeholder="Î ÎµÏÎ¹Î¿Ï‡Î®"></div>
          <div class="col-md-6"><input class="form-control" name="phone" placeholder="Î¤Î·Î»Î­Ï†Ï‰Î½Î¿"></div>
          <div class="col-md-6"><input class="form-control" name="address" placeholder="Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·"></div>
          <div class="col-12"><textarea class="form-control" name="description" rows="2" placeholder="Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®"></textarea></div>
          <div class="col-12 d-grid"><button class="btn btn-primary">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button></div>
        </form>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header fw-bold">â• ÎÎ­Î¿Ï‚ Ï…Ï€Î¬Î»Î»Î·Î»Î¿Ï‚</div>
      <div class="card-body">
        <form method="post" action="{{ url_for('admin_staff_new') }}" class="row g-2">
          <div class="col-12">
            <label class="form-label">ÎšÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±</label>
            <select class="form-select" name="shop_id">
              {% for s in shops %}
                <option value="{{ s.id }}">{{ s.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-6"><input class="form-control" name="name" placeholder="ÎŒÎ½Î¿Î¼Î± Ï…Ï€Î±Î»Î»Î®Î»Î¿Ï…" required></div>
          <div class="col-md-6"><input class="form-control" name="title" placeholder="Î¤Î¯Ï„Î»Î¿Ï‚ (Ï€.Ï‡. Barber)"></div>
          <div class="col-12 d-grid"><button class="btn btn-success">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button></div>
        </form>
        <div class="small-muted mt-2">Default Ï‰ÏÎ¬ÏÎ¹Î¿ Î¤Ï-Î£Î± 10:00-18:00.</div>
        <div class="small-muted">Î‘Î»Î»Î±Î³Î® Ï‰ÏÎ±ÏÎ¯Î¿Ï…: <code>/admin/hours/&lt;staff_id&gt;</code></div>
      </div>
    </div>

    <div class="card mt-3">
      <div class="card-header fw-bold">â• ÎÎ­Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î±</div>
      <div class="card-body">
        <form method="post" action="{{ url_for('admin_service_new') }}" class="row g-2">
          <div class="col-12">
            <label class="form-label">ÎšÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î±</label>
            <select class="form-select" name="shop_id">
              {% for s in shops %}
                <option value="{{ s.id }}">{{ s.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-6"><input class="form-control" name="name" placeholder="ÎŒÎ½Î¿Î¼Î± Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚" required></div>
          <div class="col-md-3"><input class="form-control" type="number" name="duration" placeholder="Î”Î¹Î¬ÏÎºÎµÎ¹Î± (min)" value="30"></div>
          <div class="col-md-3"><input class="form-control" name="price" placeholder="Î¤Î¹Î¼Î® (Ï€.Ï‡. 13,00)" value="0"></div>
          <div class="col-12 d-grid"><button class="btn btn-outline-primary">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button></div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header fw-bold">ğŸ“… Î¡Î±Î½Ï„ÎµÎ²Î¿Ï (Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± 100)</div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-sm align-middle">
            <thead>
              <tr>
                <th>#</th>
                <th>Î—Î¼/Î½Î¯Î±</th>
                <th>ÎÏÎ±</th>
                <th>Î ÎµÎ»Î¬Ï„Î·Ï‚</th>
                <th>Shop ID</th>
                <th>Status</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for a in appts %}
                <tr>
                  <td>{{ a.id }}</td>
                  <td>{{ a.appt_date }}</td>
                  <td>{{ a.start_hm }}-{{ a.end_hm }}</td>
                  <td>
                    <div class="fw-bold">{{ a.customer_name }}</div>
                    <div class="small-muted">{{ a.phone }}</div>
                  </td>
                  <td>{{ a.shop_id }}</td>
                  <td><span class="badge text-bg-primary">{{ a.status }}</span></td>
                  <td>
                    {% if a.status != "Î‘ÎºÏ…ÏÏ‰Î¼Î­Î½Î¿" %}
                      <form method="post" action="{{ url_for('admin_cancel_appt', aid=a.id) }}">
                        <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Î‘ÎºÏÏÏ‰ÏƒÎ· ÏÎ±Î½Ï„ÎµÎ²Î¿Ï;')">Cancel</button>
                      </form>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
